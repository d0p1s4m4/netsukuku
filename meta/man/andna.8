.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.14
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used to
.\" do unbreakable dashes and therefore won't be available.  \*(C` and \*(C'
.\" expand to `' in nroff, nothing in troff, for use with C<>.
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "ANDNA 8"
.TH ANDNA 8 "2006-06-14" "NetsukukuD 0.0.9b (debug)" ""
.SH "NAME"
ANDNA \- Abnormal Netsukuku Domain Name Anarchy
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\s-1ANDNA\s0 is the distributed, non hierarchical and decentralised system of hostname
management in Netsukuku. It substitutes the \s-1DNS\s0.
The \s-1ANDNA\s0 database is scattered inside all the Netsukuku net and in the worst 
case every node will have to use about some hundreds Kb of memory.
.PP
In order to join \s-1ANDNA\s0 it is necessary to be hooked at Netsukuku with the
\&\fIntkd\fR\|(8) daemon.
.PP
For more information about \s-1ANDNA\s0 visit:
<http://netsukuku.freaknet.org>
.SH "USAGE"
.IX Header "USAGE"
First of all be sure to have the \fIntkd\fR\|(8) daemon up and running.
.Sh "\s-1HOSTNAME\s0 \s-1REGISTRATION\s0"
.IX Subsection "HOSTNAME REGISTRATION"
You can register up to 256 hostnames. Each hostname can be a string of maximum
512 bytes, which contains a newline (\en) only at its end.
.PP
The hostnames to be registered must be listed, one per line, in the
\&\fIandna_hostnames\fR file, which is by default in
\&\fI/etc/netsukuku/andna_hostnames\fR.
.PP
The \fIntkd\fR\|(8) daemon reads it when it is started and when it receives the
\&\s-1SIGHUP\s0 signal. So if you've added a hostname while ntkd was running,
just do: 
.PP
.Vb 1
\&        killall -HUP ntkd
.Ve
.PP
All the hostnames, which are already registered by other nodes, are
added in the queue, in this way, when the other nodes won't update them, your
hostnames will automatically be the first in the queue.
.PP
An hostname expires after 3 days, if it isn't updated. \fBntkd\fR
automatically updates the registered hostnames, therefore your hostnames will
expire only if you aren't present in the Netsukuku for 3 entire days.
.PP
If you want to know the result of a registration read the \fBntkd\fR
logs.
.Sh "\s-1HOSTNAME\s0 \s-1RESOLUTION\s0"
.IX Subsection "HOSTNAME RESOLUTION"
The \fIntkd\fR\|(8) daemon runs also a \s-1DNS\s0 wrapper which receives standard \s-1DNS\s0
queries for hostnames resolution. The hostnames are resolved in \s-1ANDNA\s0, then the
\&\s-1DNS\s0 wrapper will reply to the requester.
.PP
When the \fIntkd\fR\|(8) daemon is started it copies /etc/resolv.conf in
/etc/resolv.conf.bak and adds in the first line of /etc/resolv.conf the
\&\*(L"nameserver 127.0.0.1\*(R" string. When it is closed it moves back
/etc/resolv.conf.bak to /etc/resolv.conf. Use the \fB\-R\fR option if you want to
disable this behaviour.
.PP
All the resolved hostnames are kept, until their expiration date, in the
\&\f(CW\*(C`resolved hostnames cache\*(C'\fR. The entire cache is flushed each time the
\&\fIntkd\fR\|(8) daemon receives the \s-1SIGALRM\s0 signal.
.PP
That's all.
.Sh "\s-1IP\s0 \s-1RESOLUTION\s0"
.IX Subsection "IP RESOLUTION"
It is possible to know the list of hostnames registered by a node. You have to
simply reverse resolve its ip. For example:
.PP
.Vb 1
\&        dig -x 127.0.0.2
.Ve
.PP
This command shows your currently registered hostnames. You can use it to know
what hostnames have been already registered. Note the 127.0.0.2 ip. If you use
127.0.0.1 you get only the local hostname written in /etc/hosts.
.Sh "\s-1SCATTERED\s0 \s-1NAME\s0 \s-1SERVICE\s0 \s-1DISGREGATION\s0"
.IX Subsection "SCATTERED NAME SERVICE DISGREGATION"
The Scattered Name Service Disgregation is the \s-1ANDNA\s0 equivalent of the
\&\s-1SRV\s0 Record of the Internet Domain Name System.
For a complete description of the \s-1SNSD\s0 read the \s-1NTK_RFC\s0 0009:
<http://lab.dyne.org/Ntk_SNSD>
.PP
\fI\s-1SNSD\s0 \s-1NODE\s0 \s-1REGISTRATION\s0\fR
.IX Subsection "SNSD NODE REGISTRATION"
.PP
.Vb 3
\& * Modify the /etc/netsukuku/snsd_nodes file.
\& * Copy the needed public keys
\& * Send a SIGHUP to the NetsukukuD of the register node:
.Ve
.PP
\fI\s-1SNSD\s0 \s-1NODE\s0 \s-1DELETION\s0\fR
.IX Subsection "SNSD NODE DELETION"
.PP
Not implemented
.PP
\fI\s-1SNSD\s0 \s-1HNAME\s0 \s-1RESOLUTION\s0\fR
.IX Subsection "SNSD HNAME RESOLUTION"
.PP
The utility \fIntk\-resolv\fR\|(8) can be used to resolve \s-1SNSD\s0 hostnames. Examples:
.PP
.Vb 2
\&        ntk-resolv -s 53/udp host
\&        ntk-resolv -s http host
.Ve
.SH "SIGNALS"
.IX Header "SIGNALS"
When the \fB\s-1SIGHUP\s0\fR signal is sent to \fIntkd\fR\|(8), the \fIandna_hostnames\fR and
\&\fIsnsd_nodes\fR files will be reloaded and it will try to register all the new
added hostnames and snsd records.
.PP
When the \fB\s-1SIGALRM\s0\fR signal is sent to \fIntkd\fR\|(8), the resolved hostnames
cache will be flushed.
.SH "FILES"
.IX Header "FILES"
.IP "\fI/etc/netsukuku/andna_hostnames\fR" 4
.IX Item "/etc/netsukuku/andna_hostnames"
It is the file where the hostnames to be registerd in \s-1ANDNA\s0 are kept one per
line. It's location can be changed by modifying its option in the
\&\fInetsukuku.conf\fR file.
.IP "\fI/etc/netsukuku/snsd_nodes\fR" 4
.IX Item "/etc/netsukuku/snsd_nodes"
The snsd_nodes file keeps the list of the \s-1SNSD\s0 records which will be register
in \s-1ANDNA\s0.
.IP "\fI/usr/share/netsukuku/andna_lcl_keyring\fR" 4
.IX Item "/usr/share/netsukuku/andna_lcl_keyring"
In this keyring your \s-1ANDNA\s0 public and secret keys are saved. Handle this file
with care: without it, you won't be able to update your hostnames, thus 
you'll definitely lose them.
.IP "\fI/usr/share/netsukuku/andna_cache\fR" 4
.IX Item "/usr/share/netsukuku/andna_cache"
.PD 0
.IP "\fI/usr/share/netsukuku/andna_lcl_cache\fR" 4
.IX Item "/usr/share/netsukuku/andna_lcl_cache"
.IP "\fI/usr/share/netsukuku/andna_rh_cache\fR" 4
.IX Item "/usr/share/netsukuku/andna_rh_cache"
.IP "\fI/usr/share/netsukuku/andna_counter_cache\fR" 4
.IX Item "/usr/share/netsukuku/andna_counter_cache"
.PD
They are the saved \s-1ANDNA\s0 caches.  Their locations can be 
changed in \fInetsukuku.conf\fR.
.SH "BUGS"
.IX Header "BUGS"
{ Don't panic! }
.PP
If you encounter any bug, please report it.
Use the online bug track system: 
    <http://bugs.dyne.org/> 
.PP
or the mailing list:
    <http://lists.dyne.org/netsukuku/>
.PP
and explain what the problem is and if possible a way to reproduce it.
.SH "CONTACTS"
.IX Header "CONTACTS"
Subscribe to the netsukuku mailing to get help, be updated on the latest news
and discuss on its development.
.PP
To subscribe to the list, send a message to:
    netsukuku\-subscribe@lists.dyne.org
.PP
We live night and day in \s-1IRC\s0, come to see us in:
#netsukuku 
on the FreeNode irc server (irc.freenode.org).
.SH "AUTHORS"
.IX Header "AUTHORS"
Main authors and maintainers:
.PP
Andrea Lo Pumo aka AlpT <alpt@freaknet.org>
.PP
Main contributors:
.PP
Andrea Leofreddi <andrea.leofreddi@gmail.com>, Katolaz <katolaz@freaknet.org>,
Federico Tomassini <effetom@gmail.com>
.PP
For a complete list read the \s-1AUTHORS\s0 file or visit:
    <http://netsukuku.freaknet.org/?p=Contacts>
.SH "SEE ALSO"
.IX Header "SEE ALSO"
For more information about Netsukuku visit:
    <http://netsukuku.freaknet.org>
.PP
\&\fIntkd\fR\|(8), \fIntk\-wifi\fR\|(8), \fIiproute2\fR\|(8), \fIroute\fR\|(8)
